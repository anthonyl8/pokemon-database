<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Database Application</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- CONNECTION STATUS -->
    <h1>Pokemon Database Connection Status:
        <span id="dbStatus"> </span>
        <img id="loadingGif" class="loading-gif" src="loading_100px.gif" alt="Loading...">
    </h1>

    <br>
    <hr><br>

    <!-- RESET THE DATABASE-->
    <h2>Reset Pokemon Database</h2>
    <p>Click reset to set up the Pokemon database. <strong>Use this first!</strong></p>
    <button id="resetDatabase">Reset Database</button>
    <div id="resetResultMsg"></div>

    <br>
    <hr><br>

    <!-- TRAINER -->
    <h2>Trainers</h2>
    <table id="trainersTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Name</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Insert New Trainer</h3>
    <form id="insertTrainer">
        Trainer ID: <input type="number" id="insertTrainerId" placeholder="Enter Trainer ID" min="1" required> <br><br>
        Name: <input type="text" id="insertTrainerName" placeholder="Enter Trainer Name" maxlength="255" required>
        <br><br>
        Location: <input type="text" id="insertTrainerLocation" placeholder="Enter Location (optional)" maxlength="40">
        <br><br>
        <button type="submit">Insert Trainer</button>
    </form>
    <div id="insertTrainerResultMsg"></div>

    <h3>Update Trainer</h3>
    <form id="updateTrainer">
        Trainer ID: <input type="number" id="updateTrainerId" placeholder="Enter Trainer ID to Update" min="1" required>
        <br><br>
        New Name: <input type="text" id="updateTrainerName" placeholder="Enter New Name (optional)" maxlength="255">
        <br><br>
        New Location: <input type="text" id="updateTrainerLocation" placeholder="Enter New Location (optional)"
            maxlength="40"> <br><br>
        <button type="submit">Update Trainer</button>
    </form>
    <div id="updateTrainerResultMsg"></div>

    <h3>Delete Trainer (Cascades to Player/Gym Leader)</h3>
    <form id="deleteTrainer">
        Trainer ID: <input type="number" id="deleteTrainerId" placeholder="Enter Trainer ID" min="1" required> <br><br>
        <button type="submit">Delete Trainer</button>
    </form>
    <div id="deleteTrainerResultMsg"></div>

    <br>
    <hr><br>

    <!-- PLAYER -->
    <h2>Players</h2>
    <table id="playersTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Money</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Insert New Player</h3>
    <form id="insertPlayer">
        Trainer ID: <input type="number" id="insertPlayerTrainerId" placeholder="Enter Trainer ID" min="1" required> <br><br>
        Money: <input type="number" id="insertPlayerMoney" placeholder="Enter Starting Money" min="0" required> <br><br>
        <button type="submit">Insert Player</button>
    </form>
    <div id="insertPlayerResultMsg"></div>

    <h3>Update Player Money</h3>
    <form id="updatePlayer">
        Trainer ID: <input type="number" id="updatePlayerTrainerId" placeholder="Enter Player's Trainer ID" min="1" required>
        <br><br>
        New Money: <input type="number" id="updatePlayerMoney" placeholder="Enter New Money Amount" min="0" required> <br><br>
        <button type="submit">Update Player</button>
    </form>
    <div id="updatePlayerResultMsg"></div>

    <br>
    <hr><br>

    <!-- POKEMON -->
    <h2>Pokemon</h2>
    <table id="pokemonTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Pokemon ID</th>
                <th>Name</th>
                <th>Level</th>
                <th>Nature</th>
                <th>HP IV</th>
                <th>Attack IV</th>
                <th>Defense IV</th>
                <th>Speed IV</th>
                <th>Ability ID</th>
                <th>Trainer ID</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Insert New Pokemon</h3>
    <form id="insertPokemon">
        Pokedex #: <input type="number" id="insertPokemonPokedex" placeholder="Enter Pokedex Number" min="1" required> <br><br>
        Pokemon ID: <input type="number" id="insertPokemonId" placeholder="Enter Pokemon ID" min="1" required> <br><br>
        Name: <input type="text" id="insertPokemonName" placeholder="Enter Pokemon Name" maxlength="20" required>
        <br><br>
        Total XP: <input type="number" id="insertPokemonXP" placeholder="Enter Total XP" required> <br><br>
        Nature: <input type="text" id="insertPokemonNature" placeholder="Enter Nature" maxlength="12" required> <br><br>
        HP IV: <input type="number" id="insertPokemonHPIV" placeholder="HP IV (0-31)" min="0" max="31" required>
        <br><br>
        Attack IV: <input type="number" id="insertPokemonAttackIV" placeholder="Attack IV (0-31)" min="0" max="31"
            required> <br><br>
        Defense IV: <input type="number" id="insertPokemonDefenseIV" placeholder="Defense IV (0-31)" min="0" max="31"
            required> <br><br>
        Speed IV: <input type="number" id="insertPokemonSpeedIV" placeholder="Speed IV (0-31)" min="0" max="31"
            required> <br><br>
        Ability ID: <input type="number" id="insertPokemonAbilityId" placeholder="Enter Ability ID" min="1" required> <br><br>
        Trainer ID: <input type="number" id="insertPokemonTrainerId" placeholder="Enter Trainer ID (optional)" min="1"> <br><br>
        <button type="submit">Insert Pokemon</button>
    </form>
    <div id="insertPokemonResultMsg"></div>

    <h3>Update Pokemon</h3>
    <form id="updatePokemon">
        Pokedex #: <input type="number" id="updatePokemonPokedex" placeholder="Pokemon Pokedex #" min="1" required> <br><br>
        Pokemon ID: <input type="number" id="updatePokemonId" placeholder="Pokemon ID" min="1" required> <br><br>
        New Name: <input type="text" id="updatePokemonName" placeholder="New Pokemon Name (optional)" maxlength="20">
        <br><br>
        New Total XP: <input type="number" id="updatePokemonXP" placeholder="New Total XP (optional)"> <br><br>
        New Nature: <input type="text" id="updatePokemonNature" placeholder="New Nature (optional)" maxlength="12">
        <br><br>
        New HP IV: <input type="number" id="updatePokemonHPIV" placeholder="New HP IV (optional)" min="0" max="31">
        <br><br>
        New Attack IV: <input type="number" id="updatePokemonAttackIV" placeholder="New Attack IV (optional)" min="0"
            max="31"> <br><br>
        New Defense IV: <input type="number" id="updatePokemonDefenseIV" placeholder="New Defense IV (optional)" min="0"
            max="31"> <br><br>
        New Speed IV: <input type="number" id="updatePokemonSpeedIV" placeholder="New Speed IV (optional)" min="0"
            max="31"> <br><br>
        New Ability ID: <input type="number" id="updatePokemonAbilityId" placeholder="New Ability ID (optional)" min="1">
        <br><br>
        New Trainer ID: <input type="number" id="updatePokemonTrainerId" placeholder="New Trainer ID (optional)" min="1">
        <br><br>
        <button type="submit">Update Pokemon</button>
    </form>
    <div id="updatePokemonResultMsg"></div>

    <h3>Delete Pokemon (Cascades to Learned Moves)</h3>
    <form id="deletePokemon">
        Pokedex #: <input type="number" id="deletePokemonPokedex" placeholder="Enter Pokedex Number" min="1" required> <br><br>
        Pokemon ID: <input type="number" id="deletePokemonId" placeholder="Enter Pokemon ID" min="1" required> <br><br>
        <button type="submit">Delete Pokemon</button>
    </form>
    <div id="deletePokemonResultMsg"></div>

    <br>
    <hr><br>

    <!-- MOVES LEARNED-->
    <h2>Pokemon Learned Moves</h2>
    <table id="learnedMovesTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Pokemon ID</th>
                <th>Move ID</th>
                <th>Pokemon Name</th>
                <th>Move Name</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Teach Pokemon a Move</h3>
    <form id="insertLearnedMove">
        Pokedex #: <input type="number" id="insertLearnedMovePokedex" placeholder="Enter Pokedex Number" min="1" required>
        <br><br>
        Pokemon ID: <input type="number" id="insertLearnedMovePokemonId" placeholder="Enter Pokemon ID" min="1" required>
        <br><br>
        Move ID: <input type="number" id="insertLearnedMoveId" placeholder="Enter Move ID" min="1" required> <br><br>
        <button type="submit">Teach Move</button>
    </form>
    <div id="insertLearnedMoveResultMsg"></div>

    <h3>Update Learned Move</h3>
    <form id="updateLearnedMove">
        Pokedex #: <input type="number" id="updateLearnedMovePokedex" placeholder="Pokemon Pokedex #" min="1" required> <br><br>
        Pokemon ID: <input type="number" id="updateLearnedMovePokemonId" placeholder="Pokemon ID" min="1" required> <br><br>
        Old Move ID: <input type="number" id="updateLearnedMoveOldId" placeholder="Current Move ID" min="1" required> <br><br>
        New Move ID: <input type="number" id="updateLearnedMoveNewId" placeholder="New Move ID" min="1" required> <br><br>
        <button type="submit">Update Move</button>
    </form>
    <div id="updateLearnedMoveResultMsg"></div>

    <h3>Remove Learned Move</h3>
    <form id="deleteLearnedMove">
        Pokedex #: <input type="number" id="deleteLearnedMovePokedex" placeholder="Pokemon Pokedex #" min="1" required> <br><br>
        Pokemon ID: <input type="number" id="deleteLearnedMovePokemonId" placeholder="Pokemon ID" min="1" required> <br><br>
        Move ID: <input type="number" id="deleteLearnedMoveId" placeholder="Move ID to Remove" min="1" required> <br><br>
        <button type="submit">Remove Move</button>
    </form>
    <div id="deleteLearnedMoveResultMsg"></div>

    <br>
    <hr><br>

    <!-- SELECTION -->
    <h2>Selection Query on Pokemon</h2>
    <p>Create a query to filter Pokemon based on specific criteria. Add multiple conditions using AND/OR logic.</p>
    <form id="selectionQueryForm">
        <div id="conditionsContainer">
            <!-- Conditions added here dynamically -->
        </div>
        <br>
        <button type="button" id="addConditionBtn">Add Condition</button>
        <button type="submit">Run Selection Query</button>
    </form>
    <div id="selectionResultMsg"></div>
    <table id="selectionResultTable" border="1">
        <thead></thead>
        <tbody></tbody>
    </table>

    <h4>Search Results</h4>
    <table id="pokemonSelectionTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Pokemon ID</th>
                <th>Name</th>
                <th>Level</th>
                <th>Nature</th>
                <th>HP IV</th>
                <th>Attack IV</th>
                <th>Defense IV</th>
                <th>Speed IV</th>
                <th>Ability ID</th>
                <th>Trainer ID</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- PROJECTION -->
    <h2>Projection Query</h2>
    <p>Select specific attributes from any table in the database.</p>
    <form id="projectionQuery">
        <label for="tableSelect">Select Table:</label>
        <select id="tableSelect" required>
            <option value="" disabled selected>Select a table</option>
        </select>
        <br><br>
        <div id="attributeCheckboxes"></div>
        <br>
        <button type="submit">Run Projection Query</button>
    </form>
    <div id="projectionResultMsg"></div>
    <table id="projectionResultTable" border="1">
        <thead></thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- JOIN -->
    <h2>Join Query: Species Located In</h2>
    <p>Find Pokemon species and their locations (or all species in a certain location) using JOIN operation.</p>
    <form id="joinQueryForm">
        <label for="locationFilter">Filter by Location (optional):</label>
        <select id="locationFilter">
            <option value="">All Locations</option>
        </select>
        <br><br>
        <button type="submit">Run Join Query</button>
    </form>
    <div id="joinResultMsg"></div>
    <table id="joinResultTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Species Name</th>
                <th>Description</th>
                <th>Location</th>
                <th>Climate</th>
                <th>Terrain Type</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- AGGREGATION WITH GROUP BY -->
    <h2>Aggregation with GROUP BY</h2>
    <p>Group Pokemon by trainer and analyze statistics.</p>
    
    <h3>Pokemon Defense IV by Trainer</h3>
    <form id="defenseIVForm">
        <label for="minDefenseIV">Minimum Defense IV (optional):</label>
        <input type="number" id="minDefenseIV" placeholder="Enter minimum Defense IV" min="0" max="31">
        <br><br>
        <button type="submit">Show Pokemon by Defense IV</button>
    </form>
    <div id="defenseIVResultMsg"></div>
    <table id="defenseIVTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Pokemon Name</th>
                <th>Defense IV</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Trainer Pokemon Statistics</h3>
    <button id="trainerStatsBtn">Show Trainer Statistics</button>
    <div id="trainerStatsResultMsg"></div>
    <table id="trainerStatsTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Pokemon Count</th>
                <th>Average Defense IV</th>
                <th>Max Defense IV</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- AGGREGATION WITH HAVING-->
    <h2>Aggregation with HAVING</h2>
    <p>Find trainers with multiple Pokemon and analyze their highest XP Pokemon.</p>
    
    <h3>Trainers with Highest XP Pokemon (Having Multiple Pokemon)</h3>
    <form id="highestXPForm">
        <label for="minPokemonCount">Minimum Pokemon Count:</label>
        <input type="number" id="minPokemonCount" value="2" min="1" max="10" required>
        <br><br>
        <button type="submit">Find Trainers with High XP Pokemon</button>
    </form>
    <div id="highestXPResultMsg"></div>
    <table id="highestXPTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Highest XP</th>
                <th>Pokemon Count</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Trainers with Multiple Pokemon - Detailed Stats</h3>
    <form id="multiplePokemonForm">
        <label for="minXPFilter">Minimum XP Filter (optional):</label>
        <input type="number" id="minXPFilter" placeholder="Enter minimum XP">
        <br><br>
        <button type="submit">Show Detailed Trainer Stats</button>
    </form>
    <div id="multiplePokemonResultMsg"></div>
    <table id="multiplePokemonTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Pokemon Count</th>
                <th>Average XP</th>
                <th>Max XP</th>
                <th>Min XP</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- NESTED AGGREGATION WITH GROUP BY -->
    <h2>Nested Aggregation with GROUP BY</h2>
    <p>Complex aggregation queries with nested subqueries.</p>
    
    <h3>Trainers with Above-Average Pokemon XP</h3>
    <button id="nestedAggregationBtn">Find Trainers Above Average XP</button>
    <div id="nestedAggregationResultMsg"></div>
    <table id="nestedAggregationTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Pokemon Count</th>
                <th>Average XP</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Detailed Above-Average Analysis</h3>
    <button id="aboveAverageBtn">Show Detailed Above-Average Analysis</button>
    <div id="aboveAverageResultMsg"></div>
    <table id="aboveAverageTable" border="1">
        <thead>
            <tr>
                <th>Trainer ID</th>
                <th>Trainer Name</th>
                <th>Pokemon Count</th>
                <th>Trainer Avg XP</th>
                <th>Global Avg XP</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- DIVISION -->
    <h2>Division Query: Species Has Type</h2>
    <p>Find all species that have specific types or combinations of types.</p>
    
    <h3>Find Species with Specific Types (Division)</h3>
    <form id="divisionQueryForm">
        <label>Select Types (species must have ALL selected types):</label><br>
        <div id="typeCheckboxes" style="margin: 10px 0;">
            <!-- Type checkboxes will be populated here -->
        </div>
        <br>
        <button type="submit">Find Species with Selected Types</button>
        <button type="button" id="showAllSpeciesTypesBtn">Show All Species and Their Types</button>
    </form>
    <div id="divisionResultMsg"></div>
    <table id="divisionResultTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Species Name</th>
                <th>Types</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Species by Type Count</h3>
    <form id="typeCountForm">
        <label for="exactTypeCount">Exact Type Count (optional):</label>
        <select id="exactTypeCount">
            <option value="">All Type Counts</option>
            <option value="1">Exactly 1 Type</option>
            <option value="2">Exactly 2 Types</option>
        </select>
        <br><br>
        <button type="submit">Filter by Type Count</button>
    </form>
    <div id="typeCountResultMsg"></div>
    <table id="typeCountTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Species Name</th>
                <th>Type Count</th>
                <th>Types</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <br>
    <hr><br>

    <!-- REFERENCE TABLES -->
    <h2>Reference Data</h2>

    <h3>Available Pokemon Species</h3>
    <table id="speciesTable" border="1">
        <thead>
            <tr>
                <th>Pokedex #</th>
                <th>Species Name</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Available Moves</h3>
    <table id="movesTable" border="1">
        <thead>
            <tr>
                <th>Move ID</th>
                <th>Move Name</th>
                <th>Type</th>
                <th>Power</th>
                <th>PP</th>
                <th>Accuracy</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Available Abilities</h3>
    <table id="abilitiesTable" border="1">
        <thead>
            <tr>
                <th>Ability ID</th>
                <th>Ability Name</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h3>Available Natures</h3>
    <table id="naturesTable" border="1">
        <thead>
            <tr>
                <th>Nature</th>
                <th>Stat Increased</th>
                <th>Stat Decreased</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="scripts.js"></script>
</body>

</html>